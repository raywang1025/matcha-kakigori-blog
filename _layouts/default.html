<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "zh-TW" }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% if page.title %}{{ page.title | escape }} - {% endif %}{{ site.title | escape }}</title>
    <meta name="description" content="{{ page.excerpt | default: site.description | strip_html | normalize_whitespace | truncate: 160 | escape }}">
    
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/style.css">
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/main.css">
    
    {%- feed_meta -%}
    {%- if jekyll.environment == 'production' and site.google_analytics -%}
      {%- include google-analytics.html -%}
    {%- endif -%}
  </head>

  <body class="bg-white min-h-screen flex flex-col">
    <!-- 導航區塊：漢堡選單 -->
    <header class="fixed top-0 left-0 right-0 z-50">
      <div class="mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6">
        <nav class="relative flex justify-between items-center bg-white/80 backdrop-blur-md px-4 sm:px-6 py-3 rounded-2xl shadow-sm">
          <!-- Logo -->
          <a href="{{ site.baseurl }}/" class="text-xl sm:text-2xl font-serif tracking-wide hover:text-gray-600 transition-colors">
            {{ site.title | escape }}
          </a>

          <!-- 手機版漢堡按鈕 -->
          <button id="menuButton" class="lg:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors" aria-label="選單">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path class="menu-icon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
              <path class="close-icon hidden" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
          </button>

          <!-- 電腦版選單 -->
          <div class="hidden lg:flex lg:items-center lg:space-x-12">
            {%- for path in site.header_pages -%}
              {%- assign my_page = site.pages | where: "path", path | first -%}
              {%- if my_page.title -%}
                <a class="nav-link" href="{{ site.baseurl }}{{ my_page.url }}">
                  {{ my_page.title | escape }}
                </a>
              {%- endif -%}
            {%- endfor -%}
          </div>
        </nav>

        <!-- 手機版選單 -->
        <div id="mobileMenu" class="lg:hidden">
          <div class="fixed inset-0 bg-gray-900/20 backdrop-blur-sm hidden" id="menuBackdrop"></div>
          <div class="fixed top-[73px] left-4 right-4 bg-white rounded-2xl shadow-xl p-6 -translate-y-full opacity-0 invisible transition-all duration-300">
            <div class="flex flex-col space-y-4">
              {%- for path in site.header_pages -%}
                {%- assign my_page = site.pages | where: "path", path | first -%}
                {%- if my_page.title -%}
                  <a class="nav-link px-4 py-2 hover:bg-gray-50 rounded-lg" 
                     href="{{ site.baseurl }}{{ my_page.url }}">
                    {{ my_page.title | escape }}
                  </a>
                {%- endif -%}
              {%- endfor -%}
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- 主要內容區：增加上下間距，創造呼吸感 -->
    <main class="flex-grow mt-32 mb-24">
      {{ content }}
    </main>

    <!-- 頁尾區塊：使用視覺分組和留白 -->
    <footer class="bg-gray-50 mt-auto">
      <div class="mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-20 lg:py-24">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-12 md:gap-16 lg:gap-24">
          <!-- 品牌區塊 -->
          <div class="space-y-6">
            <h3 class="font-serif text-xl tracking-wide">{{ site.title | escape }}</h3>
            <p class="text-gray-600 leading-relaxed">{{ site.description | escape }}</p>
          </div>
          
          <!-- 社群連結區塊 -->
          <div class="space-y-6">
            <h3 class="font-serif text-xl tracking-wide">聯絡資訊</h3>
            {%- if site.social_links -%}
            <div class="flex space-x-6">
              {%- for link in site.social_links -%}
                <a href="https://github.com/{{ link[1] }}" 
                   class="text-gray-600 hover:text-gray-900 transition-colors">
                  {{ link[0] }}
                </a>
              {%- endfor -%}
            </div>
            {%- endif -%}
          </div>
          
          <!-- 訂閱區塊 -->
          <div class="space-y-6">
            <h3 class="font-serif text-xl tracking-wide">訂閱更新</h3>
            <p class="text-gray-600 leading-relaxed">
              訂閱我們的電子報，獲取最新的抹茶刨冰資訊。
            </p>
            <form class="mt-4 space-y-4">
              <input type="email" 
                     placeholder="請輸入您的 Email" 
                     class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-green-500">
              <button type="submit" 
                      class="w-full px-4 py-2 bg-green-50 text-green-800 rounded-lg hover:bg-green-100 transition-colors">
                訂閱電子報
              </button>
            </form>
          </div>
        </div>
        
        <!-- 版權資訊：視覺分隔 -->
        <div class="mt-12 sm:mt-16 pt-8 border-t border-gray-200 text-center text-gray-500">
          <p>&copy; {{ 'now' | date: "%Y" }} {{ site.title }}. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <script src="{{ site.baseurl }}/assets/js/main.js"></script>

    <!-- 漢堡選單 JavaScript -->
    <script>
      const menuButton = document.getElementById('menuButton');
      const mobileMenu = document.getElementById('mobileMenu');
      const menuBackdrop = document.getElementById('menuBackdrop');
      const mobileMenuContent = mobileMenu.querySelector('div:last-child');
      const menuIcon = document.querySelector('.menu-icon');
      const closeIcon = document.querySelector('.close-icon');
      let isMenuOpen = false;

      function toggleMenu() {
        isMenuOpen = !isMenuOpen;
        
        // 切換圖標
        menuIcon.classList.toggle('hidden');
        closeIcon.classList.toggle('hidden');
        
        // 切換背景
        menuBackdrop.classList.toggle('hidden');
        
        // 切換選單
        if (isMenuOpen) {
          mobileMenuContent.classList.remove('-translate-y-full', 'opacity-0', 'invisible');
          mobileMenuContent.classList.add('translate-y-0', 'opacity-100', 'visible');
        } else {
          mobileMenuContent.classList.remove('translate-y-0', 'opacity-100', 'visible');
          mobileMenuContent.classList.add('-translate-y-full', 'opacity-0', 'invisible');
        }
      }

      menuButton.addEventListener('click', toggleMenu);
      menuBackdrop.addEventListener('click', toggleMenu);

      // 監聽視窗大小變化
      window.addEventListener('resize', () => {
        if (window.innerWidth >= 1024 && isMenuOpen) {
          toggleMenu();
        }
      });
    </script>
  </body>
</html> 